.task-panel-container {
	padding: 0;
}

.task-panel-list {
	padding: 4px 0;
}

/* Collapsible heading groups */
.task-panel-group {
	margin: 0;
}

.task-panel-group-heading {
	display: flex;
	align-items: center;
	padding: 4px 12px;
	cursor: pointer;
	user-select: none;
	font-size: var(--font-ui-smaller);
	color: var(--text-muted);
	font-weight: var(--font-semibold);
}

.task-panel-group-heading:hover {
	background: var(--background-modifier-hover);
}

/* Remove default details marker and use custom triangle */
.task-panel-group > summary {
	list-style: none;
}

.task-panel-group > summary::-webkit-details-marker {
	display: none;
}

.task-panel-group > summary::before {
	content: "";
	display: inline-block;
	width: 0;
	height: 0;
	margin-right: 6px;
	border-left: 5px solid var(--text-faint);
	border-top: 4px solid transparent;
	border-bottom: 4px solid transparent;
	transition: transform 100ms ease-in-out;
	flex-shrink: 0;
}

.task-panel-group[open] > summary::before {
	transform: rotate(90deg);
}

/* Task list and rows */
.task-panel-task-list {
	padding: 0;
}

.task-panel-task-row {
	display: flex;
	align-items: flex-start;
	padding: 3px 12px;
	min-height: 28px;
	gap: 6px;
	cursor: pointer;
}

.task-panel-task-row:hover {
	background: var(--background-modifier-hover);
}

/* Indentation for nested tasks */
.task-panel-task-row[data-depth="1"] { padding-left: 32px; }
.task-panel-task-row[data-depth="2"] { padding-left: 52px; }
.task-panel-task-row[data-depth="3"] { padding-left: 72px; }
.task-panel-task-row[data-depth="4"] { padding-left: 92px; }
.task-panel-task-row[data-depth="5"] { padding-left: 112px; }

.task-panel-task-row .task-list-item-checkbox {
	margin: 0;
	margin-top: 3px;
	flex-shrink: 0;
	cursor: pointer;
}

.task-panel-task-text {
	font-size: var(--font-ui-small);
	color: var(--text-muted);
	line-height: 1.5;
	word-break: break-word;
	min-width: 0;
	flex: 1;
}

/* Rendered markdown inside task text â€” flatten block elements */
.task-panel-task-text p {
	margin: 0;
	display: inline;
}

.task-panel-task-text mark {
	background-color: var(--text-highlight-bg);
	color: var(--text-highlight-fg, inherit);
	padding: 1px 2px;
	border-radius: var(--radius-xs);
}

.task-panel-task-text strong {
	font-weight: var(--font-semibold);
	color: var(--bold-color, var(--text-muted));
}

.task-panel-task-text em {
	color: var(--italic-color, var(--text-muted));
}

.task-panel-task-text code {
	font-family: var(--font-monospace);
	font-size: var(--code-size);
	background-color: var(--code-background);
	color: var(--code-normal);
	padding: 1px 4px;
	border-radius: var(--radius-xs);
}

.task-panel-task-text s {
	color: var(--text-faint);
}

/* Focus indicators for keyboard navigation */
.task-panel-task-row:focus-visible {
	background: var(--background-modifier-hover);
	outline: 2px solid var(--interactive-accent);
	outline-offset: -2px;
	border-radius: var(--radius-s);
}

.task-panel-group-heading:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: -2px;
	border-radius: var(--radius-s);
}

/* Completed tasks */
.task-panel-completed .task-panel-task-text {
	text-decoration: line-through;
	color: var(--text-faint);
}

/* Flash highlight when navigating to a task in the editor */
.task-panel-flash {
	background-color: var(--text-highlight-bg) !important;
	transition: background-color 0s;
}

.cm-line:not(.task-panel-flash) {
	transition: background-color 1s ease-out;
}
